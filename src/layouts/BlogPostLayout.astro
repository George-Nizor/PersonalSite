---
import BaseLayout from '~/layouts/BaseLayout.astro';

export interface Props {
  title: string;
  date?: Date;
  excerpt?: string;
  readTime?: string;
  image?: string;
  author?: string;
  tags?: string[];
  // Legacy support
  description?: string;
  publishDate?: Date;
  hero?: string;
}

const { 
  title, 
  date, 
  excerpt, 
  readTime, 
  image, 
  author, 
  tags = [],
  description,
  publishDate,
  hero
} = Astro.props as Props;

const postDate = date ?? publishDate;
const postDescription = excerpt ?? description;
const postImage = image ?? hero;
---
<BaseLayout title={`${title} Â· George Nizoridis`} description={postDescription} page="blog">
  <article class="mx-auto max-w-3xl">
    <header class="mb-12" data-reveal>
      <div class="flex items-center justify-between text-xs uppercase tracking-[0.3em] text-sand/60">
        <span>
          {postDate?.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' }) ?? 'No date'}
        </span>
        {readTime && <span>{readTime}</span>}
      </div>
      <h1 class="mt-4 text-4xl font-bold text-white md:text-5xl">{title}</h1>
      <p class="mt-4 text-lg text-sand/70">{postDescription}</p>
      {author && (
        <p class="mt-3 text-sm text-sand/60">by {author}</p>
      )}
      {tags.length > 0 && (
        <div class="mt-5 flex flex-wrap gap-2 text-xs text-sand/60">
          {tags.map((tag) => (
            <span class="rounded-full border border-white/10 bg-white/5 px-3 py-1">{tag}</span>
          ))}
        </div>
      )}
      {postImage && (
        <div class="mt-8 overflow-hidden rounded-3xl border border-white/10">
          <img src={postImage} alt={title} class="w-full object-cover" loading="lazy" />
        </div>
      )}
    </header>
    <div class="prose prose-invert max-w-none">
      <slot />
    </div>
  </article>
</BaseLayout>
